<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README.rdoc</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README.rdoc</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README.rdoc
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun May 18 13:32:06 +1000 2008</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>validates_as_time</h1>
<p>
This plugin helps with writing minimal code to add date time attributes to
your models that are parsed using strings. The strings are parsed using the
<tt>Time.parse</tt> method, or if you have required <tt>chronic</tt> in
your code it will use <tt>Chronic.parse</tt> for all kinds of extra
niceness. For more information on chronic see <a
href="http://chronic.rubyforge.org">chronic.rubyforge.org</a>.
</p>
<p>
In addition this plugin can be used to simply validate date time attributes
with the usual options like <tt>:minimum</tt>, <tt>:maximum</tt>,
<tt>:allow_nil</tt>, etc.
</p>
<h2>Install</h2>
<p>
The old fashioned way:
</p>
<pre>
  script/plugin install
</pre>
<p>
Or if you are using git, add as a submodule
</p>
<pre>
  git submodule add git://github.com/lawrencepit/validates_as_time.git vendor/plugins/validates_as_time
</pre>
<h2>Usage</h2>
<p>
For example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    validates_as_time :starts_at, :ends_at
  end
</pre>
<p>
This also creates accessor methods named <tt>starts_at_string</tt> and
<tt>ends_at_string</tt>.
</p>
<p>
and in your view:
</p>
<pre>
  &lt;%= f.text_field :starts_at_string %&gt;
  &lt;%= f.text_field :ends_at_string %&gt;
</pre>
<p>
You can also provide extra configuration parameters like you are used to
with the standard rails validates methods. For example:
</p>
<pre>
  validates_as_time :starts_at, :message =&gt; &quot;could not be parsed&quot;,
                    :allow_nil =&gt; false, :if =&gt; Proc.new { |user| user.signup_step &gt; 2 })
</pre>
<p>
or:
</p>
<pre>
  validates_as_time :due_at, :minimum =&gt; Time.now, :maximum =&gt; &quot;1 jan 2009&quot;,
                    :too_early =&gt; &quot;You cannot create a task that is due before the current time&quot;,
                    :too_late =&gt; &quot;You cannot create a task that is due next year&quot;
</pre>
<h3>Configuration options ===</h3>
<ul>
<li><tt>:default</tt> - The default value to use when the attribute is empty.
This default is only used to present the string value of the time
attribute. Default is Time.now

</li>
<li><tt>:format</tt> - The format used to present a Time object. Default is
&quot;%Y-%m-%d %H:%M&quot;. See the method Time.strftime for more
formatting options.

</li>
<li><tt>:minimum</tt> - The minimum value allowed for the attribute. You can
provide a Time object or a string which will be parsed by Chronic.parse.

</li>
<li><tt>:maximum</tt> - The maximum value allowed for the attribute. You can
provide a Time object or a string which will be parsed by Chronic.parse.

</li>
<li><tt>:message</tt> - A custom error message (default is: &quot;is
invalid&quot;)

</li>
<li><tt>:too_early</tt> - A custom error message when the time falls before the
<tt>:minimum</tt> given (default is: &quot;cannot be before %s&quot;).

</li>
<li><tt>:too_late</tt> - A custom error message when the time falls on or after
the <tt>:maximum</tt> given (default is: &quot;cannot be on or after
%s&quot;).

</li>
<li><tt>:allow_nil</tt> - Skip validation if attribute is <tt>nil</tt> (default
is: <tt>true</tt>).

</li>
<li><tt>:if</tt> - Specifies a method, proc or string to call to determine if
the validation should occur (e.g. <tt>:if =&gt; :allow_validation</tt>, or
<tt>:if =&gt; Proc.new { |user| user.signup_step &gt; 2 }</tt>). The
method, proc or string should return or evaluate to a true or false value.

</li>
<li><tt>:unless</tt> - Specifies a method, proc or string to call to determine
if the validation should not occur (e.g. <tt>:unless =&gt;
:skip_validation</tt>, or <tt>:unless =&gt; Proc.new { |user|
user.signup_step &lt;= 2 }</tt>).

</li>
<li><tt>:on</tt> - Specifies when this validation is active (default is
<tt>:save</tt>, other options <tt>:create</tt>, <tt>:update</tt>)

</li>
</ul>
<h2>Localization</h2>
<p>
To localize the default messages, override:
</p>
<pre>
  ActiveRecord::Errors.default_error_messages[:invalid]
  ActiveRecord::Errors.default_error_messages[:blank]
  ActiveRecord::Errors.default_error_messages[:too_early]
  ActiveRecord::Errors.default_error_messages[:too_late]
</pre>
<p>
The messages <tt>:too_early</tt> and <tt>:too_late</tt> can accept a
placeholder %s which will be replaced with the given minimum resp. maximum
value.
</p>
<h2>Authors</h2>
<p>
Lawrence Pit (lawrence.pit@gmail.com)
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>